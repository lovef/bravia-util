#!/usr/bin/env bash

cd "$(dirname "$0")"

source setup

function jsonString {
  egrep -o -m1 '"'"$1"'" *: *"[^"]*"' | egrep -o -m1 '"[^"]*"$' | egrep -o -m1 '[^"]*'
}

status=$(curl --silent "$ip/sony/system" \
    --data '{
    "method": "getPowerStatus",
    "id": 50,
    "params": [],
    "version": "1.0"
}' | jsonString status)

echo Power status: $status
